# üñºÔ∏è ImageFlow

ImageFlow ‚Äî —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–∏—ë–º–∞ –∑–∞–¥–∞—á –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `resize`, `blur`) –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é worker pool. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á –ø–æ ID.

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (resize, blur)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ PostgreSQL
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á –≤ —Ñ–æ–Ω–µ —á–µ—Ä–µ–∑ worker pool
- Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
make docker-compose-up
```

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:

```bash
make docker-compose-down
```

### 2. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é

```bash
make build
./imageflow
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Docker:

```bash
make docker-build
make docker-run
```

---

## üìñ API

### Upload –∑–∞–¥–∞—á–∏

```http
GET /api/v1/upload?filename=test.jpg&type=resize
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `filename` ‚Äî –∏–º—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- `type` ‚Äî —Ç–∏–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏ (`resize`, `blur`, –∏ —Ç.–¥.)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```http
GET /api/v1/status?id=task-id
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `cmd/app/main.go` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- `internal/usecase` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á, worker pool)
- `internal/repository/postgres` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GORM/PostgreSQL
- `internal/delivery` ‚Äî HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ Gin
- `internal/worker` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è worker pool –∏ –∑–∞–¥–∞—á (`Job`)
- `internal/model` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `config.Load()`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ—Ä—Ç `:8080`, –º–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `.env` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## üß™ Swagger

–î–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8080/swagger/index.html
```

---

## üìã –ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á–∏

```json
{
  "id": "4f8b6c21-7f85-41d5-b9d2-2f5fd8baf03a",
  "filename": "cat.jpg",
  "type": "resize",
  "status": "done"
}
```

---

## üõ†Ô∏è TODO

- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (s3 minio)
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, grayscale, watermark)
- UI –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á
